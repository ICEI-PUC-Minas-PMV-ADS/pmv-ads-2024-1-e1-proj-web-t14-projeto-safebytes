<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/csspagquiz.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>

<div class="cabecalho">
    <div class="titulo">
        <i class="bi bi-chevron-left"></i>
        <h3 class="pergunta_titulo">É ou não é Crime Virtual ?</h3>
    </div>
</div>

<div class="barra">
    <div class="barra_de_progresso">
        <div class="progresso"></div>      
    </div>
    <p class="numero">0/7</p>
</div>

<div class="corpo">
    <div>
        <p class="pergunta_quiz">Carregando pergunta...</p>
    </div>

    <div class="true-button">
        <button class="V">Verdadeiro</button>
    </div>

    <div class="false-button">
        <button class="F">Falso</button>
    </div>
</div>

<script>
    let perguntas = [];
    let perguntaAtual = 0;
    let pontuacao = 0;

    function embaralhar(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function carregarPerguntas() {
        fetch('../Gersons/perguntas.json')
        .then(response => response.json())
        .then(data => {
            embaralhar(data);
            perguntas = data.slice(0, 7); // Selecionar apenas as primeiras 7 perguntas
            exibirPergunta();
        })
        .catch(error => console.error('Erro ao carregar perguntas:', error));
    }

    function exibirPergunta() {
        if (perguntaAtual < perguntas.length) {
            const pergunta = perguntas[perguntaAtual];
            document.querySelector('.pergunta_quiz').textContent = pergunta.pergunta;
            document.querySelector('.numero').textContent = `${perguntaAtual + 1}/7`;
            atualizarBarraProgresso();
        } else {
            mostrarResultadoFinal();
        }
    }


    function atualizarBarraProgresso() {
        const progresso = document.querySelector('.progresso');
        const percent = ((perguntaAtual + 1) / 7) * 100;
        progresso.style.width = `${percent}%`;
    }


    function verificarResposta(resposta) {
        const pergunta = perguntas[perguntaAtual];
        if (resposta === pergunta.resposta_correta) {
            pontuacao++;
        }
        perguntaAtual++;
        exibirPergunta();
    }


    function mostrarResultadoFinal() {
        document.querySelector('.corpo').innerHTML = `
            <h2>Quiz Completo!</h2>
            <p>Sua pontuação: ${pontuacao} de ${perguntas.length}</p>
        `;
    }


    document.querySelector('.V').addEventListener('click', () => verificarResposta('Verdadeiro'));
    document.querySelector('.F').addEventListener('click', () => verificarResposta('Falso'));

    document.addEventListener('DOMContentLoaded', carregarPerguntas);
</script>

</body>
</html>
