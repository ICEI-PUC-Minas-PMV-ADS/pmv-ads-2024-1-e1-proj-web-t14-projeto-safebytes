<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/perfil.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">


    <title>Perfil</title>
</head>

<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/perfil.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <title>Perfil</title>
</head>

<body>
    <header>
        <!-- Imagem de Fundo -->
        <div id="bg04div">

            <div class="foto">
                <img id="perfil" src="../assets/perfil.jpg" alt="Foto de perfil">
            </div>
            <a href="../pages/pagInicial.html"><i id="seta-voltar" class="bi bi-arrow-left"></i></a><svg
                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 810 320">
                <path fill="#325CC8" fill-opacity="1"
                    d="M0,64L48,101.3C96,139,192,213,288,245.3C384,277,480,267,576,218.7C672,171,768,85,864,48C960,11,1056,21,1152,32C1248,43,1344,53,1392,58.7L1440,64L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z">
                </path>
            </svg>
            <div id="porcentagem" class="number">
                <h2>75%</h2>
            </div>
        </div>
        <!-- Foto de perfil -->

        </div>
    </header>

    <!-- Nickname -->
    <span id="caixa-branca">
        <div class="nick-box">
            <div class="nickname">
                <h6 id="userNickname">Nickname</h6>
            </div>
        </div>
    </span>


    <!-- Opções de Configuração -->
    <section id="perfilOptions">
        <footer>
            <div class="container">
                <div class="container-box">
                    <div class="wrapper" id="configurarPerfil">
                        <div class="icon">
                            <i class="bi bi-gear"></i>
                        </div>
                        <div class="opcao">
                            <h3>Configurar Perfil</h3>
                        </div>
                        <div class="linkIcon">
                            <a href="#">
                                <i class="bi bi-chevron-compact-right"></i>
                            </a>
                        </div>
                    </div>
                    <div class="wrapper">
                        <div class="icon">
                            <i class="bi bi-check2-square"></i>
                        </div>
                        <div class="opcao">
                            <h3>O que foi feito</h3>
                        </div>
                        <div class="linkIcon">
                            <a href="pagHistorico.html">
                                <i class="bi bi-chevron-compact-right"></i>
                            </a>
                        </div>
                    </div>
                    <div class="wrapper">
                        <div class="icon">
                            <i class="bi bi-mortarboard"></i>
                        </div>
                        <div class="opcao">
                            <h3>Certificado</h3>
                        </div>
                        <div class="linkIcon">
                            <a href="#">
                                <i class="bi bi-lock"></i>
                            </a>
                        </div>
                    </div>
                    <div class="wrapper" id="logoutButton">
                        <div class="icon">
                            <i class="bi bi-door-open"></i>
                        </div>
                        <div class="opcao">
                            <h3>Sair</h3>
                        </div>
                        <div class="linkIcon">
                            <a href="#">
                                <i class="bi bi-chevron-compact-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </section>
</body>
<script src="../js/perfil.js"></script>
<script>
    // Carregar a imagem de perfil do localStorage ao carregar a página
    document.addEventListener('DOMContentLoaded', function () {
        const storedImage = localStorage.getItem('profileImage');
        if (storedImage) {
            const perfilImg = document.getElementById('perfil');
            if (perfilImg) {
                perfilImg.setAttribute('src', storedImage);
            }
        }
    });

    document.getElementById('logoutButton').addEventListener('click', function () {
        // Limpar dados de autenticação do localStorage
        localStorage.removeItem('userEmail');
        localStorage.removeItem('userPassword');

        // Obter o email do usuário atualmente logado
        const currentUserEmail = localStorage.getItem('userEmail');

        // Obter o email associado à foto de perfil atualmente armazenada
        const profileImageEmail = localStorage.getItem('profileImageEmail');

        // Verificar se o usuário está fazendo logout da mesma conta em que a foto de perfil foi definida
        if (currentUserEmail !== profileImageEmail) {
            // Se não for a mesma conta, remover a foto de perfil do localStorage
            localStorage.removeItem('profileImage');
            localStorage.removeItem('profileImageEmail');
        }

        // Redirecionar para a página de login
        window.location.href = "../pages/login.html";
    });
    // Adicionar evento de clique para a opção "Configurar Perfil"
    document.getElementById('configurarPerfil').addEventListener('click', function () {
        window.location.href = "../pages/perfilConfig.html";
    });

</script>

</html>